{% extends "base.html" %}
{% load static %}

{% block title %}{{post.short_title}} | Media Ghor{% endblock %}

{% block content %}
<div class="relative min-h-screen bg-gray-50" data-if-contact="{% if contact %}true{% else %}false{% endif %}">
    <!-- Desktop/Tablet Layout -->
    <div class="hidden md:flex h-screen overflow-hidden">
        <!-- Left Side - Recommended Posts -->
        <div class="w-1/4 border-r border-gray-200 overflow-y-auto bg-white p-4 mt-4">
            <h3 class="text-xl font-bold text-gray-800 mb-4">More Services</h3>
            <div class="space-y-4">
                {% for post in recommended_posts %}
                <a href="{% url 'company_services:service_details' id=post.id %}" class="block group">
                    <div class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-100 transition">
                        {% if post.image %}
                        <div class="w-16 rounded bg-gray-100 p-1 flex items-center justify-center">
                            <img 
                                src="{{ post.image.url }}" 
                                alt="{{ post.title }}" 
                                class="max-w-full max-h-16 object-contain"
                            >
                        </div>
                        {% else %}
                        <div class="w-16 h-16 bg-gray-200 rounded flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        {% endif %}
                        <div>
                            <h4 class="font-medium text-gray-900 group-hover:text-blue-600">{{ post.short_title|default:post.title|truncatechars:40 }}</h4>
                            <div class="flex items-center mt-1 text-sm text-gray-500">
                                <span>{{ post.created_at|date:"M d, Y" }}</span>
                                <span class="mx-2">•</span>
                            </div>
                        </div>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Middle - Post Content -->
        <div class="w-2/4 overflow-y-auto p-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">{{ post.title }}</h1>
            {% if post.short_title %}
            <h2 class="text-xl text-gray-600 mb-6">{{ post.short_title }}</h2>
            {% endif %}
            
            <div class="whitespace-pre-wrap font-sans text-base leading-relaxed">
                <div class="[&>p]:indent-8 [&>p]:mb-4 [&>ul]:list-disc [&>ul]:pl-8 [&>ul]:mb-4 [&>ol]:list-decimal [&>ol]:pl-8 [&>ol]:mb-4 [&>pre]:bg-gray-100 [&>pre]:p-4 [&>pre]:rounded [&>pre]:overflow-x-auto [&>pre]:my-4 [&>blockquote]:border-l-4 [&>blockquote]:border-gray-300 [&>blockquote]:pl-4 [&>blockquote]:text-gray-600 [&>blockquote]:my-4">
              {{ post.description|default:post.short_title|safe }}
                </div>
            </div>
            
            <h2 class="flex items-center text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
                <svg class="w-6 h-6 text-purple-500 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8s-9-3.582-9-8 4.03-8 9-8 9 3.582 9 8z" />
                </svg>
                Details Explanation
            </h2>

            <div class="whitespace-pre-wrap font-sans text-base leading-relaxed">
                <div class="[&>p]:indent-8 [&>p]:mb-4 [&>ul]:list-disc [&>ul]:pl-8 [&>ul]:mb-4 [&>ol]:list-decimal [&>ol]:pl-8 [&>ol]:mb-4 [&>pre]:bg-gray-100 [&>pre]:p-4 [&>pre]:rounded [&>pre]:overflow-x-auto [&>pre]:my-4 [&>blockquote]:border-l-4 [&>blockquote]:border-gray-300 [&>blockquote]:pl-4 [&>blockquote]:text-gray-600 [&>blockquote]:my-4">
              {{ post.explanation|default:post.description|safe }}
                </div>
            </div>


            <div class="pt-6 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                        <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                    </svg>
                    Contact Now
                </h3>
            
                <div class="flex flex-wrap justify-between gap-4">
                    <!-- WhatsApp -->
                    <a href="https://wa.me/8801736008374" target="_blank"
                        class="flex-1 min-w-[120px] flex flex-col items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition duration-200 group text-center">
                        <div class="bg-green-100 p-3 rounded-full group-hover:bg-green-200 transition duration-200 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#25D366">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                        </div>
                        <p class="text-xs text-gray-500">WhatsApp</p>
                        <p class="text-sm font-medium text-gray-900 group-hover:text-green-600">+88 01736008374</p>
                    </a>
            
                    <!-- Phone -->
                    <a href="tel:+8801736008374"
                        class="flex-1 min-w-[120px] flex flex-col items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition duration-200 group text-center">
                        <div class="bg-blue-100 p-3 rounded-full group-hover:bg-blue-200 transition duration-200 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                        </div>
                        <p class="text-xs text-gray-500">Call Us</p>
                        <p class="text-sm font-medium text-gray-900 group-hover:text-blue-600">+88 01736008374</p>
                    </a>
            
                    <!-- Email -->
                    <a href="mailto:tanmoymondal1315@gmail.com"
                        class="flex-1 min-w-[120px] flex flex-col items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition duration-200 group text-center">
                        <div class="bg-purple-100 p-3 rounded-full group-hover:bg-purple-200 transition duration-200 mb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <p class="text-xs text-gray-500">Email Us</p>
                        <p class="text-sm font-medium text-gray-900 group-hover:text-purple-600">tanmoymondal1315@gmail.com</p>
                    </a>
                </div>
            </div>
            
            
        </div>

        <!-- Right Side - Post Meta -->
        <div class="w-full lg:w-1/3 xl:w-1/4 border-l border-gray-200 overflow-y-auto bg-white p-6 mt-4 sticky top-4">
            <!-- Featured Image -->
            {% if post.image %}
            <div class="mb-6 overflow-hidden rounded-xl shadow-lg transition-transform duration-300 hover:scale-[1.02]">
                <img src="{{ post.image.url }}" alt="{{ post.title }}" 
                     class="w-full h-auto object-cover rounded-xl hover:shadow-xl transition-shadow duration-300">
            </div>
            {% endif %}
            
            <!-- Post Meta Section -->
            <div class="space-y-6">
                <!-- Title -->
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-xl">
                    <h2 class="text-xl font-bold text-gray-800 tracking-tight leading-snug">
                        {{ post.short_title }}
                    </h2>
                </div>
                
                <!-- Publication Date -->
                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    <div>
                        <h3 class="text-xs font-medium text-gray-500 uppercase tracking-wider">Published</h3>
                        <p class="text-base font-medium text-gray-900">{{ post.created_at|date:"F j, Y" }}</p>
                    </div>
                </div>
                
                <!-- Author (optional) -->
                {% if post.author %}
                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    <div>
                        <h3 class="text-xs font-medium text-gray-500 uppercase tracking-wider">Author</h3>
                        <p class="text-base font-medium text-gray-900">{{ post.author.name }}</p>
                    </div>
                </div>
                {% endif %}
                
                
                
                <!-- Contact Section -->
                <div class="pt-6 border-t border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                            <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                        </svg>
                        Contact Now
                    </h3>
                    
                    <div class="space-y-4">
                        <!-- WhatsApp -->
                        <a href="https://wa.me/8801736008374" target="_blank" 
                        class="flex items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition-colors duration-200 group">
                         <div class="bg-green-100 p-2 rounded-lg group-hover:bg-green-200 transition-colors duration-200">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#25D366">
                                 <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.296-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.625.712.227 1.36.195 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                             </svg>
                         </div>
                         <div class="ml-3">
                             <p class="text-sm font-medium text-gray-500">WhatsApp</p>
                             <p class="text-base font-medium text-gray-900 group-hover:text-blue-600 transition-colors duration-200">+88 01736008374</p>
                         </div>
                     </a>
                     
                        
                        <!-- Phone -->
                    <a href="tel:+8801736008374" 
                        class="flex items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors duration-200 group">
                        <div class="bg-blue-100 p-2 rounded-lg group-hover:bg-blue-200 transition-colors duration-200">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-gray-500">Call Us</p>
                            <p class="text-base font-medium text-gray-900 group-hover:text-blue-600 transition-colors duration-200">+88 01736008374</p>
                        </div>
                    </a>
                     
                        
                        <!-- Email -->
                        <a href="mailto:tanmoymondal1315@gmail.com" 
                            class="flex items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors duration-200 group">
                                <div class="bg-purple-100 p-2 rounded-lg group-hover:bg-purple-200 transition-colors duration-200">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium text-gray-500">Email Us</p>
                                    <p class="text-base font-medium text-gray-900 group-hover:text-blue-600 transition-colors duration-200">tanmoymondal1315@gmail.com</p>
                                </div>
                            </a>

                    </div>
                </div>

                <div class="pt-2">
                    <h3 class="text-sm font-medium text-gray-500 mb-3 text-center">Share this post</h3>
                    <div class="flex justify-center space-x-4">
                      <!-- Facebook Share -->
                      <a href="#" onclick="shareOnFacebook(event)" class="text-gray-500 hover:text-blue-600 transition-colors duration-200">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                        </svg>
                      </a>
                      
                      <!-- Twitter Share -->
                      <a href="#" onclick="shareOnTwitter(event)" class="text-gray-500 hover:text-blue-400 transition-colors duration-200">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
                        </svg>
                      </a>
                      
                      <!-- Instagram Share -->
                      <a href="#" onclick="shareOnInstagram(event)" class="text-gray-500 hover:text-red-600 transition-colors duration-200">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                          <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                        </svg>
                      </a>
                    </div>
                </div>
                
                <!-- Newsletter Signup (optional) -->
                <div class="pt-6 border-t border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Stay Updated</h3>
                    <p class="text-sm text-gray-600 mb-3">Subscribe to our newsletter for the latest updates.</p>
                    <form class="space-y-3">
                        <input type="email" placeholder="Your email address" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                        <button type="submit" 
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                            Subscribe
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Layout -->
    <div class="md:hidden">
        <!-- Content Area -->
        <div class="p-4">
            <div id="mobile-content" class="mb-16">
                <h1 class="text-2xl font-bold text-gray-900 mb-2">{{ post.title }}</h1>
                {% if post.short_title %}
                <h2 class="text-lg text-gray-600 mb-4">{{ post.short_title }}</h2>
                {% endif %}
                
                {% if post.image %}
                <div class="mb-6">
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-auto rounded-lg shadow-md">
                </div>
                {% endif %}
                
                <div class="whitespace-pre-wrap font-sans text-base leading-relaxed my-4">
                    <div class="[&>p]:indent-8 [&>p]:mb-4 [&>ul]:list-disc [&>ul]:pl-8 [&>ul]:mb-4 [&>ol]:list-decimal [&>ol]:pl-8 [&>ol]:mb-4 [&>pre]:bg-gray-100 [&>pre]:p-4 [&>pre]:rounded [&>pre]:overflow-x-auto [&>pre]:my-4 [&>blockquote]:border-l-4 [&>blockquote]:border-gray-300 [&>blockquote]:pl-4 [&>blockquote]:text-gray-600 [&>blockquote]:my-4">
                        {{ post.description|default:post.short_title|safe }}

                    </div>
                </div>




                <h2 class="flex items-center text-2xl md:text-3xl font-semibold text-gray-800 mb-4">
                    <svg class="w-6 h-6 text-purple-500 mr-2" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8s-9-3.582-9-8 4.03-8 9-8 9 3.582 9 8z" />
                    </svg>
                    Details Explanation
                </h2>
    
                <div class="whitespace-pre-wrap font-sans text-base leading-relaxed">
                    <div class="[&>p]:indent-8 [&>p]:mb-4 [&>ul]:list-disc [&>ul]:pl-8 [&>ul]:mb-4 [&>ol]:list-decimal [&>ol]:pl-8 [&>ol]:mb-4 [&>pre]:bg-gray-100 [&>pre]:p-4 [&>pre]:rounded [&>pre]:overflow-x-auto [&>pre]:my-4 [&>blockquote]:border-l-4 [&>blockquote]:border-gray-300 [&>blockquote]:pl-4 [&>blockquote]:text-gray-600 [&>blockquote]:my-4">
                  {{ post.explanation|default:post.description|safe }}
                    </div>
                </div>
    
                <div class="pt-6 border-t border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                            <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                        </svg>
                        Contact Now
                    </h3>
                
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                        <!-- WhatsApp -->
                        <a href="https://wa.me/8801736008374" target="_blank"
                            class="flex flex-col items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition duration-200 group text-center">
                            <div class="bg-green-100 p-2 sm:p-3 rounded-full group-hover:bg-green-200 transition duration-200 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" viewBox="0 0 24 24" fill="#25D366">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                                </svg>
                            </div>
                            <p class="text-xs text-gray-500">WhatsApp</p>
                            <p class="text-xs sm:text-sm font-medium text-gray-900 group-hover:text-green-600 break-all">+88 01736008374</p>
                        </a>
                
                        <!-- Phone -->
                        <a href="tel:+8801736008374"
                            class="flex flex-col items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition duration-200 group text-center">
                            <div class="bg-blue-100 p-2 sm:p-3 rounded-full group-hover:bg-blue-200 transition duration-200 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                            </div>
                            <p class="text-xs text-gray-500">Call Us</p>
                            <p class="text-xs sm:text-sm font-medium text-gray-900 group-hover:text-blue-600 break-all">+88 01736008374</p>
                        </a>
                
                        <!-- Email -->
                        <a href="mailto:tanmoymondal1315@gmail.com"
                            class="flex flex-col items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition duration-200 group text-center">
                            <div class="bg-purple-100 p-2 sm:p-3 rounded-full group-hover:bg-purple-200 transition duration-200 mb-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                </svg>
                            </div>
                            <p class="text-xs text-gray-500">Email Us</p>
                            <p class="text-xs sm:text-sm font-medium text-gray-900 group-hover:text-purple-600 break-all">tanmoymondal1315@gmail.com</p>
                        </a>
                    </div>
                </div>
                <!-- Enhanced mobile contact button -->
                <div id="floating-contact-button" class="fixed bottom-16 right-6 z-50">
                    <button 
                        onclick="showSection('mobile-meta', document.getElementById('bottom-contacts-btn'))"
                        class="flex items-center justify-center w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 focus:outline-none"
                        aria-label="Send message"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-white rotate-45" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                        </svg>
                    </button>
                </div>
            </div>
            
            <div id="mobile-meta" class="hidden mb-16">
                <div class="space-y-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-4 tracking-tight leading-snug">
                        {{ post.short_title }}
                    </h2>
                    <div>
                        <h3 class="text-sm font-medium text-gray-500">Published</h3>
                        <p class="text-lg text-gray-900">{{ post.created_at|date:"F j, Y" }}</p>
                    </div>


                    <div class="pt-6 border-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                                <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                            </svg>
                            Contact Now
                        </h3>
                    
                        <div class="flex flex-col items-center gap-4">
                            <!-- WhatsApp -->
                            <a href="https://wa.me/8801736008374" target="_blank"
                                class="w-full max-w-xs flex flex-col items-center p-3 bg-green-50 rounded-lg hover:bg-green-100 transition duration-200 group text-center">
                                <div class="bg-green-100 p-3 rounded-full group-hover:bg-green-200 transition duration-200 mb-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6" viewBox="0 0 24 24" fill="#25D366">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                                    </svg>
                                </div>
                                <p class="text-xs text-gray-500">WhatsApp</p>
                                <p class="text-sm font-medium text-gray-900 group-hover:text-green-600">+88 01736008374</p>
                            </a>
                    
                            <!-- Phone -->
                            <a href="tel:+8801736008374"
                                class="w-full max-w-xs flex flex-col items-center p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition duration-200 group text-center">
                                <div class="bg-blue-100 p-3 rounded-full group-hover:bg-blue-200 transition duration-200 mb-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                </div>
                                <p class="text-xs text-gray-500">Call Us</p>
                                <p class="text-sm font-medium text-gray-900 group-hover:text-blue-600">+88 01736008374</p>
                            </a>
                    
                            <!-- Email -->
                            <a href="mailto:tanmoymondal1315@gmail.com"
                                class="w-full max-w-xs flex flex-col items-center p-3 bg-purple-50 rounded-lg hover:bg-purple-100 transition duration-200 group text-center">
                                <div class="bg-purple-100 p-3 rounded-full group-hover:bg-purple-200 transition duration-200 mb-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                    </svg>
                                </div>
                                <p class="text-xs text-gray-500">Email Us</p>
                                <p class="text-sm font-medium text-gray-900 group-hover:text-purple-600">tanmoymondal1315@gmail.com</p>
                            </a>
                        </div>
                    </div>
                    
    
                    <div class="pt-2">
                        <h3 class="text-sm font-medium text-gray-500 mb-3 text-center">Share this post</h3>
                        <div class="flex justify-center space-x-4">
                          <!-- Facebook Share -->
                          <a href="#" onclick="shareOnFacebook(event)" class="text-gray-500 hover:text-blue-600 transition-colors duration-200">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                              <path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path>
                            </svg>
                          </a>
                          
                          <!-- Twitter Share -->
                          <a href="#" onclick="shareOnTwitter(event)" class="text-gray-500 hover:text-blue-400 transition-colors duration-200">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                              <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
                            </svg>
                          </a>
                          
                          <!-- Instagram Share -->
                          <a href="#" onclick="shareOnInstagram(event)" class="text-gray-500 hover:text-red-600 transition-colors duration-200">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                              <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path>
                            </svg>
                          </a>
                        </div>
                    </div>
                    
                    <!-- Newsletter Signup (optional) -->
                    <div class="pt-6 border-t border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">Stay Updated</h3>
                        <p class="text-sm text-gray-600 mb-3">Subscribe to our newsletter for the latest updates.</p>
                        <form class="space-y-3">
                            <input type="email" placeholder="Your email address" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                            <button type="submit" 
                                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200">
                                Subscribe
                            </button>
                        </form>
                    </div>


                </div>
            </div>
            
            <div id="mobile-recommended" class="hidden mb-16">
                <h3 class="text-xl font-bold text-gray-800 mb-4">More Services</h3>
                <div class="space-y-4">
                    {% for post in recommended_posts %}
                    <a href="{% url 'company_services:service_details' id=post.id %}" class="block group">
                        <div class="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-100 transition">
                            {% if post.image %}
                            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-16 h-16 object-cover rounded">
                            {% else %}
                            <div class="w-16 h-16 bg-gray-200 rounded flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                            </div>
                            {% endif %}
                            <div>
                                <h4 class="font-medium text-gray-900 group-hover:text-blue-600">{{ post.short_title|default:post.title|truncatechars:40 }}</h4>
                                <div class="flex items-center mt-1 text-sm text-gray-500">
                                    <span>{{ post.created_at|date:"M d, Y" }}</span>
                                    <span class="mx-2">•</span>
                                </div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-3 px-4 z-10">
            <button onclick="showSection('mobile-content', this)" class="flex flex-col items-center text-blue-600">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
                </svg>
                <span class="text-xs mt-1">Content</span>
            </button>
        
            <button id="bottom-contacts-btn" onclick="showSection('mobile-meta', this)" class="flex flex-col items-center text-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <span class="text-xs mt-1">Contacts</span>
            </button>
        
            <button onclick="showSection('mobile-recommended', this)" class="flex flex-col items-center text-gray-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <span class="text-xs mt-1">Recommended</span>
            </button>
        </div>
        
    </div>
</div>

<script>
    // Mobile navigation - Enhanced with scroll management
   
    // Track scroll positions for each section
    const scrollPositions = {
        'mobile-content': 0,
        'mobile-meta': 0,
        'mobile-recommended': 0
    };

    // Enhanced showSection function with scroll preservation
    function showSection(sectionId, clickedBtn = null) {
        // Store current scroll position
        const currentSection = document.querySelector('#mobile-content:not(.hidden), #mobile-meta:not(.hidden), #mobile-recommended:not(.hidden)');
        if (currentSection) {
            scrollPositions[currentSection.id] = currentSection.scrollTop;
        }

        // Hide all sections
        document.getElementById('mobile-content').classList.add('hidden');
        document.getElementById('mobile-meta').classList.add('hidden');
        document.getElementById('mobile-recommended').classList.add('hidden');

        // Show the selected section
        const activeSection = document.getElementById(sectionId);
        activeSection.classList.remove('hidden');

        // Restore scroll position
        setTimeout(() => {
            activeSection.scrollTop = scrollPositions[sectionId] || 0;
        }, 50);

        // Reset button colors
        document.querySelectorAll('[onclick^="showSection"]').forEach(btn => {
            btn.classList.remove('text-blue-600');
            btn.classList.add('text-gray-500');
        });

        // Highlight the clicked button if available
        if (clickedBtn) {
            clickedBtn.classList.remove('text-gray-500');
            clickedBtn.classList.add('text-blue-600');
        }

        // Show/hide the floating button
        const floatingBtn = document.getElementById('floating-contact-button');
        if (sectionId === 'mobile-meta') {
            floatingBtn.classList.add('hidden');
        } else {
            floatingBtn.classList.remove('hidden');
        }
    }
    // Helper function to get CSRF token
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }




    const currentUrl = encodeURIComponent(window.location.href);
    const pageTitle = encodeURIComponent(document.title);

    // Share functions
    function shareOnFacebook(e) {
        e.preventDefault();
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${currentUrl}`, 'facebook-share-dialog', 'width=800,height=600');
    }

    function shareOnTwitter(e) {
        e.preventDefault();
        window.open(`https://twitter.com/intent/tweet?text=${pageTitle}&url=${currentUrl}`, 'twitter-share-dialog', 'width=800,height=600');
    }

    function shareOnInstagram(e) {
        e.preventDefault();
        // Instagram doesn't support direct web sharing, so we'll open their app URL scheme
        // Note: This may not work in all browsers/devices
        window.open(`instagram://share?url=${currentUrl}`);
        
        // Fallback for desktop browsers
        setTimeout(() => {
        window.location.href = 'https://www.instagram.com/';
        }, 500);
    }


    

    /**
    * Displays a toast notification message centered at bottom
    * @param {string} message - The message to display
    * @param {string} [type='info'] - Type of toast (info, success, error, warning)
    * @param {number} [duration=3000] - Duration in milliseconds (0 = persistent)
    */
    function showToastMessage(message, type = 'info', duration = 3000) {
        // Create toast container if it doesn't exist
        let toastContainer = document.getElementById('toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.id = 'toast-container';
            toastContainer.className = 'fixed bottom-20 left-1/2 transform -translate-x-1/2 z-50 space-y-2 w-full max-w-xs';
            document.body.appendChild(toastContainer);
        }

        // Create toast element
        const toast = document.createElement('div');
        toast.className = `toast-notification flex items-start p-4 rounded-lg shadow-lg transform transition-all duration-300 ${getToastClasses(type)}`;
        toast.setAttribute('role', 'alert');
        toast.style.opacity = '0';
        toast.style.maxHeight = '0';
        toast.style.overflow = 'hidden';

        // Add icon based on type
        const icon = document.createElement('span');
        icon.className = `toast-icon mr-3 mt-0.5 ${getToastIconClasses(type)}`;
        toast.appendChild(icon);

        // Add message content
        const content = document.createElement('div');
        content.className = 'flex-1';
        content.textContent = message;
        toast.appendChild(content);

        // Add close button
        const closeBtn = document.createElement('button');
        closeBtn.className = 'ml-4 text-gray-400 hover:text-gray-500 focus:outline-none';
        closeBtn.innerHTML = '&times;';
        closeBtn.setAttribute('aria-label', 'Close notification');
        closeBtn.addEventListener('click', () => dismissToast(toast));
        toast.appendChild(closeBtn);

        // Add to DOM
        toastContainer.prepend(toast);

        // Animate in
        setTimeout(() => {
            toast.style.opacity = '1';
            toast.style.maxHeight = '200px';
        }, 10);

        // Auto-dismiss if duration > 0
        if (duration > 0) {
            setTimeout(() => dismissToast(toast), duration);
        }

        return toast;
    }

    function getToastClasses(type) {
        const classes = {
            info: 'bg-blue-50 text-blue-800',
            success: 'bg-green-50 text-green-800',
            error: 'bg-red-50 text-red-800',
            warning: 'bg-yellow-50 text-yellow-800'
        };
        return classes[type] || classes.info;
    }

    function getToastIconClasses(type) {
        const classes = {
            info: 'text-blue-500',
            success: 'text-green-500',
            error: 'text-red-500',
            warning: 'text-yellow-500'
        };
        const baseClass = 'inline-flex items-center justify-center flex-shrink-0 w-6 h-6';
        return `${baseClass} ${classes[type] || classes.info}`;
    }

    function dismissToast(toast) {
        toast.style.opacity = '0';
        toast.style.maxHeight = '0';
        setTimeout(() => {
            toast.remove();
            const container = document.getElementById('toast-container');
            if (container && container.children.length === 0) {
                container.remove();
            }
        }, 300);
    }

    document.addEventListener('DOMContentLoaded', function() {
        const element = document.querySelector('[data-if-contact]');
        if (element) {
            const ifContact = element.getAttribute('data-if-contact');
            if (ifContact === 'true') {
                const contactsBtn = document.getElementById('bottom-contacts-btn');
                if (contactsBtn) {
                    contactsBtn.click();
                }
            } else {
                console.log('Contact does not exist');
            }
        }

        const contentDivs = document.querySelectorAll(".whitespace-pre-wrap > div");

        contentDivs.forEach(div => {
        if (div.innerHTML.trim().length > 0) {
            div.innerHTML = div.innerHTML.trimStart();
        }
        });
        document.querySelectorAll('div').forEach(div => {
            if (!div.id && !div.className && window.getComputedStyle(div).backgroundColor !== 'rgba(0, 0, 0, 0)') {
                div.style.display = 'none';
            }
        });

      



        const searchInput = document.getElementById('searchInput');
        const searchSuggestions = document.getElementById('searchSuggestions');
        let debounceTimer;
        let currentRequest = null;
    
        // Fetch suggestions from Django backend
        const fetchSuggestions = async (query) => {
            try {
                // Cancel previous request if still pending
                if (currentRequest) {
                    currentRequest.abort();
                }
                
                currentRequest = new AbortController();
                const response = await fetch(`/api/search-suggestions/?q=${encodeURIComponent(query)}&page=services`, {
                    signal: currentRequest.signal
                });
                
                const data = await response.json();
                console.log("API Response:", data);
                
                // Ensure we always return an array of strings
                if (data.results && Array.isArray(data.results)) {
                    return data.results.map(item => {
                        // Handle both object {short_title} and direct string cases
                        return typeof item === 'object' ? item.short_title : item;
                    }).filter(Boolean); // Remove any undefined/null values
                }
                return [];
            } catch (error) {
                if (error.name !== 'AbortError') {
                    console.error('Error fetching suggestions:', error);
                }
                return [];
            } finally {
                currentRequest = null;
            }
        };
    
        // Display suggestions dropdown
        const showSuggestions = (titles) => {
            // Clear previous suggestions
            searchSuggestions.innerHTML = '';
            console.log("Showing suggestions:", titles);
    
            if (!titles || titles.length === 0) {
                searchSuggestions.classList.add('hidden');
                return;
            }
    
            // Create suggestion elements
            titles.forEach(title => {
                if (!title) return; // Skip empty titles
                
                const suggestion = document.createElement('div');
                suggestion.className = 'px-4 py-2 hover:bg-yellow-100 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0';
                suggestion.textContent = title;
                
                suggestion.addEventListener('click', () => {
                    const currentUrl = "http://127.0.0.1:8000/services";
                    window.location.href = `${currentUrl}?search=${encodeURIComponent(title)}`;
                });
                
                searchSuggestions.appendChild(suggestion);
            });
    
            searchSuggestions.classList.remove('hidden');
        };
    
        // Handle input with debounce
        searchInput.addEventListener('input', () => {
            clearTimeout(debounceTimer);
            const query = searchInput.value.trim();
            
            if (query.length < 2) {
                searchSuggestions.classList.add('hidden');
                return;
            }
            
            debounceTimer = setTimeout(async () => {
                const suggestions = await fetchSuggestions(query);
                showSuggestions(suggestions);
            }, 300);
        });
    
        // Close suggestions when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.bv-searchbox')) {
                searchSuggestions.classList.add('hidden');
            }
        });
    
        // Handle search button click
        document.querySelector('.bv-searchbox button').addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (query) {
                const currentUrl = "http://127.0.0.1:8000/services";
                window.location.href = `${currentUrl}?search=${encodeURIComponent(query)}`;
            }
        });
    
        // Handle Enter key
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const query = searchInput.value.trim();
                if (query) {
                    const currentUrl = "http://127.0.0.1:8000/services";
                    window.location.href = `${currentUrl}?search=${encodeURIComponent(query)}`;
                }
            }
        });
    });
</script>

<style>


    /* Base Styles */
    #mobile-content,
    #mobile-meta,
    #mobile-recommended {
        height: calc(100vh - 180px); /* Adjust based on your header/footer */
        overflow-y: auto;
        -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        scroll-behavior: smooth;
        padding-bottom: 20px; /* Prevent bottom cut-off */
    }
    
    /* Prevent content jump when switching tabs */
    .mobile-section-container {
        min-height: calc(100vh - 180px);
    }
    
    /* Smooth transitions for tab switching */
    [id^="mobile-"] {
        transition: opacity 0.3s ease;
    }
    
    /* Better scrolling experience */
    .prose {
        overscroll-behavior-y: contain;
    }
    
    /* Post Content Styles */
    .prose {
        line-height: 1.75;
        color: #374151;
    }
    .prose p {
        margin-bottom: 1.25em;
    }
    .prose img {
        max-width: 100%;
        height: auto;
        border-radius: 0.5rem;
        margin: 1.5em 0;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    .prose h2 {
        font-size: 1.5em;
        font-weight: 600;
        margin: 1.5em 0 0.75em;
        color: #111827;
    }
    .prose h3 {
        font-size: 1.25em;
        font-weight: 600;
        margin: 1.5em 0 0.75em;
        color: #111827;
    }
    .prose ul, .prose ol {
        margin-bottom: 1.25em;
        padding-left: 1.5em;
    }
    .prose li {
        margin-bottom: 0.5em;
    }
    .prose a {
        color: #3b82f6;
        text-decoration: underline;
        transition: color 0.2s ease;
    }
    .prose a:hover {
        color: #2563eb;
    }
    .prose blockquote {
        border-left: 4px solid #e5e7eb;
        padding-left: 1em;
        margin: 1.5em 0;
        color: #6b7280;
        font-style: italic;
    }




    /* Ensure content sections are completely transparent */
    #mobile-content,
    #mobile-meta,
    #mobile-recommended {
        background: transparent !important;
    }

    /* Remove any potential overlay effects */
    body > div:not([id]):not([class]) {
        display: none !important;
    }

    /* Dark mode adjustments */
    @media (prefers-color-scheme: dark) {
        .mobile-like-button svg {
            color: #9ca3af; /* Lighter gray for dark mode */
        }
        
        .mobile-like-button .likes-count {
            background-color: #047857;
        }
    }

    /* Responsive adjustments */
    @media (max-width: 400px) {
        .mobile-like-container {
            bottom: 5rem;
            right: 0.8rem;
        }
    }



        
    /* Toast Notification Styles */
    .toast-notification {
        will-change: transform, opacity, max-height;
        transition: opacity 300ms ease, max-height 300ms ease, transform 300ms ease;
        display: flex;
        align-items: flex-start;
        padding: 0.75rem 1rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        max-width: 24rem;
        margin: 0 auto;
    }
    
    .toast-icon {
        font-size: 1.25rem;
        flex-shrink: 0;
        margin-right: 0.75rem;
        margin-top: 0.125rem;
    }
    
    .toast-content {
        flex: 1;
        font-size: 0.875rem;
        line-height: 1.25rem;
    }
    
    .toast-close {
        margin-left: 0.75rem;
        color: #9ca3af;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 0.25rem;
    }
    
    .toast-close:hover {
        color: #6b7280;
        background-color: #f3f4f6;
    }
    
    /* Toast Variants */
    .toast-info {
        background-color: #eff6ff;
        color: #1e40af;
    }
    
    .toast-success {
        background-color: #ecfdf5;
        color: #065f46;
    }
    
    .toast-error {
        background-color: #fef2f2;
        color: #b91c1c;
    }
    
    .toast-warning {
        background-color: #fffbeb;
        color: #92400e;
    }
    
    /* Responsive Adjustments */
    @media (max-width: 640px) {
        .prose {
            font-size: 0.9375rem;
        }
        
        .prose h2 {
            font-size: 1.375em;
        }
        
        .prose h3 {
            font-size: 1.125em;
        }
        
        .mobile-like-container {
            bottom: 4.5rem;
        }
    }
    
    /* Dark Mode Support */
    @media (prefers-color-scheme: dark) {
        .prose {
            color: #e5e7eb;
        }
        
        .prose h2, .prose h3 {
            color: #f9fafb;
        }
        
        .prose a {
            color: #60a5fa;
        }
        
        .prose a:hover {
            color: #3b82f6;
        }
        
    }
</style>
{% endblock %}